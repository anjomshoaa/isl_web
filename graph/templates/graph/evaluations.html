{% extends "isl/base_site.html" %}
{% load static %}


{% block content %}

<div class="col-xl-12 col-lg-7">


{% for metric_name, data0 in metrics.items %}

		<div class="card shadow mb-4">
			<div class="card-header py-3">
				<h6 class="m-0 font-weight-bold text-primary">{{metric_name}}</h6>
			</div>
			<div class="card-body">
        <canvas id="chart_{{metric_name}}"></canvas>
			</div>
		</div>

{% endfor %}

</div>

{% endblock %}


{% block extrascript %}

<script src="{% static "vendor/chart.js/Chart.bundle.min.js" %}"></script>
<script>

  $(function () {

{% for metric_name, datasets in metrics.items %}

    var ctx_{{metric_name}} = document.getElementById('chart_{{metric_name}}').getContext('2d');

    var config_{{metric_name}} = {
      type: 'scatter',
      data: {
        labels: {{labels | safe}},
        datasets: {{datasets | safe}}

          //[{
          //    label: 'Scatter Dataset',
          //    data: {{data | safe}}
          //}]
      },
      options: {
        scales: {
          xAxes: [{type: 'linear', position: 'bottom'}],
          yAxes: [{type: 'category'}],
          },
          tooltips: {
             callbacks: {
                label: function(tooltipItem, data) {
                   //var label = data.labels[tooltipItem.index];
                   var run = data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem.index]['run'];
                   //return label + ': (' + tooltipItem.xLabel + ', ' + tooltipItem.yLabel + ')'+r+data;
                   return   '['+tooltipItem.value+', '+ run+']: '+tooltipItem.label;
                }
             }
          }
        }
    };

    var chart_{{metric_name}} = new Chart(ctx_{{metric_name}}, config_{{metric_name}});


{% endfor %}

  });
	</script>


{% endblock %}
